---
layout: post
title:  "5 нововведений в Java 9"
date:   2015-08-12 18:44:00
categories: posts
description: "5 нововведений в #Java9"
tags:
- Java 9
- перевод
---

Перед вами вольный перевод [статьи](http://www.javacodegeeks.com/2015/06/5-features-in-java-9-that-will-change-how-you-develop-software-and-2-that-wont.html) на тему интересных нововведений в Java 9.

## Какие наиболее интересные вещи ожидаются с релизом Java 9?

Несмотря на относительную тишину про Java 9, разработчики JDK усердно работают, подготавливая следующий релиз, который ожидается всего через несколько месяцев - в декабре 2015 года. После этого, будет проведено тщательное тестирование и подготовка к публичному релизу, запланированному на сентябрь 2016 года.

Сейчас уже есть довольно чёткое представление того, что стоит ожидать в Java 9. 

Если Java 8 может быть описана как версия с упором на лямбды, стримы и изменения API, то Java 9 полностью посвящена Jigsaw (основная цель - разбить JRE и принести модульность в компоненты ядра Java), дополнительным утилитам и изменениям ядра. В этой статье собраны некоторые нововведения Java 9, которые мы считаем наиболее интересными.

<!--more-->

Перечисленные ниже нововведения уже готовы и могут быть опробованы вами в ранней версии Java 9.

## 1. Java + REPL = jshell
Ранее были сомнения, что Kulla успеет к Java 9. Но сейчас стало известно, что в следующем релизе Java одной из новых особенностей будет новая утилита для работы с командной строкой. Она называется jshell. Она добавит встроенную поддержку REPL (Read-Eval-Print-Loop) в Java. Т.е. если вы захотите запустить несколько строк кода на Java, то вам не придётся оборачивать их в классы или выделять отдельный проект. Так же можно забыть про точки с запятой:
<pre>
  <code class="shell">
-> 2 + 2
| Expression value is: 4
|     assigned to temporary variable $1 of type int
  </code>
</pre>

Существует несколько альтернативных решений получения REPL - в виде аддонов для популярных IDE или web консоли, но официального решения не существовало до сих пор. jshell уже доступен в ранней версии Java 9.


## 2. Микробенчмарки на подходе
Java Microbenchmarking Harness (JMH) Алексея Шипилева (Alexey Shipilev) делает новый шаг в своём развитии и присоединяется к Java, как официальный бенчмарк.

Если вы хотите получить наиболее точные результаты, которые помогут принять вам правильное решение, то, на сегодняшний день, JMH - лучший выбор. И теперь JMH становится частью Java 9.

## 3. Будет ли G1 новым сборщиком мусора по умолчанию?
Распространённым заблуждением считается, что в Java есть всего один сборщик мусора. На самом деле их целых 4. 

На данный момент обсуждается установка G1 сборщиком мусора по умолчанию. G1 был впервые представлен в Java 7. Вообще G1 был спроектирован для улучшенной работы с "кучей" размером больше чем 4ГБ. G1 показывает более редкое срабатывание сборщика мусора, но время самого сбора, возрастает.

## 4. Будущее с HTTP 2.0
Несколько месяцев назад была утверждена спецификация HTTP 2.0 RFC, построенная поверх SPDY алгоритма от гугла. SPDY уже показала увеличение скорости относительно HTTP 1.1 в переделах 11.81%-47.7%. Большинство современных браузеров уже поддерживают данную технологию.

Java 9 будет полностью поддерживать протокол HTTP 2.0, а так же получит новый HTTP клиент, который придёт на замену старого HttpURLConnection. В новом HTTP клиенте будет реализована поддержка веб сокетов и HTTP 2.0.

## 5. Нововведения в process API
До сих пор возможность контроля и управления процессами операционной системы средствами Java были реализованы очень слабо. Например, раньше чтобы получить информацию о вашем PID нужно было использовать нативный код <del>или прибегать к чёрной магии</del>. Кроме того, данный подход требовал индивидуального решения для каждой из платформ.

До Java 9 код получения PID имел примерно следующий вид:

<pre>
<code class="java">
public static void main(String[] args) throws Exception
{
    Process proc = Runtime.getRuntime().exec(new String[]{ "/bin/sh", "-c", "echo $PPID" });

    if (proc.waitFor() == 0)
    {
        InputStream in = proc.getInputStream();
        int available = in.available();
        byte[] outputBytes = new byte[available];

        in.read(outputBytes);
        String pid = new String(outputBytes);

        System.out.println("Your pid is " + pid);
     }
}
</code>
</pre>

Теперь данный код может выглядеть следующим образом:

<pre>
<code class="java">
System.out.println(“Your pid is ” + Process.getCurrentPid());
</code>
</pre>

Обновление расширит возможности взаимодействия Java с операционной системой: новые методы для поиска идентификаторов процессов (PIDs), имена и состояния процессов и многое другое.

## Чего мы не увидим в Java 9?
Две возможности, которые все хотели и ожидали увидеть, но которые так и не попадут в релиз Java 9.

**Стандартизированные JSON API**

За добавление JSON API голосовали так же усердно как за Jigsaw, но данный API так и не будет добавлен.

Главный архитектор платформы Java Марк Ренгольд (Mark Reinhold) в рассылке JDK 9 написал:
>Эта система была бы полезным дополнение к платформе, но по большому счёту, это не так важно как остальные нововведения для JDK 9, финансируемые или рассматриваемые к финансированию ораклом.
Мы можем пересмотреть это нововведение в JDK 10 или более поздних релизах.


**API для работы с деньгами и валютами**

Так же не будет добавлена поддержка работы с деньгами и валютой.

[Оригинал](http://www.javacodegeeks.com/2015/06/5-features-in-java-9-that-will-change-how-you-develop-software-and-2-that-wont.html).
